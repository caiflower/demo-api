apiVersion: v1
kind: ConfigMap
metadata:
  name: test-api-config
  namespace: test-api
data:
  config.yaml: |
    caller_interval: 10
  default.yaml: |
    web:
      - name: default
        port: 8080
        rootPath:
        headerTraceID: X-Request-Id
        web_limiter:
          enable: true
          qos: 1000
        enablePprof: true

    database:
      - dialect: mysql
        url: mysql-primary.app.svc.cluster.local:3306
        dbName: task_test
        user: test-user
        password: test-user
        debug: true
        charset: utf8mb4
        maxOpen: 200
        maxIdle: 20
        connMaxLifetime: 28800

    logger:
      level: TRACE
      trace: true
      timeFormat:
      path:
      fileName: app.log
      rollingPolicy: timeAndSize
      maxSize: 500MB
      maxTime: 24h
      compress: True
      cleanBackup: True
      backupMaxCount: 10
      backupMaxDiskSize: 10GB
      color: True

    http_client:
      verbose: false

    cluster:
      enable: True
      mode: single
      nodes:
        - name: localhost1
          ip: 127.0.0.1
          port: 9001
          local: true
        - name: localhost2
          ip: 127.0.0.1
          port: 9002
        - name: localhost3
          ip: 127.0.0.1
          port: 9003

    redis:
      - mode:
        addrs:
          - redis-master.app.svc.cluster.local:6379
        password: qq1339811657
        readTimeout: 10s
        writeTimeout: 20s
        poolSize: 100
        minIdleConns: 20
        maxConnAge: 80s

    telemetry:
      dns: http://project2_secret_token@uptrace.app.svc.cluster.local:14318/My project?grpc=14317
      serviceName: demo-api
      deploymentEnv: dev

    kafka:
      - name: testConsumer
        enable: true
        bootstrapServers:
          - kafaka-kafka.app.svc.cluster.local:9092
        groupId: testGroup4
        topics:
          - testTopic
        securityProtocol: SASL_PLAINTEXT
        saslMechanism: SCRAM-SHA-256
        saslUsername: user1
        saslPassword: 3JVZWh98fe
        consumerAutoOffsetReset: earliest